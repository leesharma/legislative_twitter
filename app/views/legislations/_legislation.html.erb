<% cache ['legislation', legislation] do %>
    <h4>
      <%= link_to truncate(legislation.title.titleize, length: 150), legislation %>
      <small><%= legislation.legislation_type + ' | ' + legislation.created_at.strftime("%-l:%M%P on %m/%d/%y") %></small>
    </h4>
    <p><%= truncate(strip_tags(legislation.body),
                    length: 200,
                    omission: "...") %>
      <%= "(with #{pluralize legislation.attachments.count, 'attachment'})" unless
                  legislation.attachments.empty? %>
    </p>

    <!-- Legislation Options -->
    <div class="button-bar">
      <!-- Download PDF Button -->
      <ul class="button-group">
        <li><%= link_to 'PDF', legislation_path(id: legislation.id, format: 'pdf'),
                        class:'tiny button' %></li>
      </ul>
      <!-- Action Buttons -->
      <ul class="button-group">
        <li><%= link_to 'Show', legislation, class:'tiny button' %></li>
        <li><%= link_to 'Edit', edit_legislation_path(legislation), class:'tiny button' %></li>
        <li><%= link_to('Delete', legislation,
                        method: "delete", class: 'tiny alert button',
                        data: { confirm: 'Are you sure you want to delete this?'}) %></li>
      </ul>
    </div>
<% end %>